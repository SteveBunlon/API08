<div class="container">
    <div class="row">
        <div class="col s12">
            <ul class="tabs" tabs>
                <li class="tab col s3 l2"><a href="#impressionTab">Impressions</a></li>
                <li class="tab col s3 l2"><a href="#furnitureTab">Fournitures</a></li>
                <li class="tab col s3 l2"><a href="#ITProvisionTab">Informatique</a></li>
            </ul>
        </div>
        <div id="impressionTab" class="col s12">
            <br>
            <div class="row">
                <div ng-if="products.length > 0" class="col s12 l4 m4"
                     ng-repeat="p in products">
                    <div id="{{p.name}}" class="card hoverable  lighten-1 teal-text"
                         ng-if="p.category == 'impression'">
                        <div class="card-image waves-effect waves-light">
                            <img ng-click="user.accountType == 'admin' && editProduct(p.name,p.price,p.onSale)"
                                 class="responsive-img" src="{{p.img}}">
                        </div>
                        <div class="card-content">
                            <span class="truncate"><h4>{{p.name}}</h4></span>
                        </div>
                        <div class="card-action valign-wrapper teal white-text">
                            <div ng-if="!p.onSale" class="left valign col s10">
                                <i class="material-icons left" alt="non disponible à la vente">block</i>
                                <span>Non disponible</span>
                            </div>
                            <div ng-if="p.onSale" class="left valign col s10">
                                <i class="material-icons left" alt="en vente">work</i>
                                <span>En vente</span>
                            </div>
                            <div class="valign right col s2">
                                <span>{{p.price}}€</span>
                            </div>
                        </div>
                    </div><!--/card-->
                </div>
            </div>
        </div>
        <div id="furnitureTab" class="col s12">
            <br>
            <div class="row">
                <div class="s10 col">
                    <div class="row">
                        <div ng-if="products.length > 0" class="col m4 animated fadeInUp"
                             ng-repeat="p in products">
                            <div class="card hoverable teal lighten-1 white-text" ng-if="p.category == 'furniture'">
                                <div class="card-image waves-effect waves-light">
                                    <img ng-click="user.accountType == 'admin' && editProduct(p.name,p.price,p.onSale)"
                                         class="responsive-img" src="{{p.img}}">
                                </div>
                                <div class="card-content row valign-wrapper" style="height:50px">
                                    <span class="col truncate valign"><h4>{{p.name}}</h4></span>
                                </div>
                                <div class="card-action row valign-wrapper small" style="height:30px">
                                    <span class="col valign" ng-if="!p.onSale"><i class="material-icons"
                                                                                  alt="non disponible a la vente">block</i><span>Non disponible</span></span>
                                    <span class="col valign" ng-if="p.onSale"><i class="material-icons" alt="en vente">work</i><span>En vente</span></span>
                                    <span class="col s4 valign price right-align"><h5>{{p.price}}€</h5></span>
                                </div>
                            </div><!--/card-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="ITProvisionTab" class="col s12">
            <br>
            <div class="row">
                <div class="s10 col">
                    <div class="row">
                        <div ng-if="products.length > 0" class="col m4 animated fadeInUp"
                             ng-repeat="p in products">
                            <div class="card hoverable teal lighten-1 white-text" ng-if="p.category == 'ITProvision'">
                                <div class="card-image waves-effect waves-light">
                                    <img ng-click="user.accountType == 'admin' && editProduct(p.name,p.price,p.onSale)"
                                         class="responsive-img" src="{{p.img}}">
                                </div>
                                <div class="card-content row valign-wrapper" style="height:50px">
                                    <span class="col truncate valign"><h4>{{p.name}}</h4></span>
                                </div>
                                <div class="card-action row valign-wrapper small" style="height:30px">
                                    <span class="col valign" ng-if="!p.onSale"><i class="material-icons"
                                                                                  alt="non disponible a la vente">block</i><span>Non disponible</span></span>
                                    <span class="col valign" ng-if="p.onSale"><i class="material-icons" alt="en vente">work</i><span>En vente</span></span>
                                    <span class="col s4 valign price right-align"><h5>{{p.price}}€</h5></span>
                                </div>
                            </div>
                        </div><!--/card-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="fixed-action-btn" ng-if="user.accountType == 'admin'" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large red modal-trigger modal-close" href="#createProductModal" modal>
        <i class="large material-icons">add</i>
    </a>
</div>

<div id="createProductModal" class="modal">
    <form name="newProductForm" novalidate enctype="multipart/form-data">
        <div class="modal-content">
            <h4>Création d'un produit</h4>
            {{$scope.errMessage}}
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">person</i>
                    <input ng-model="name" required id="icon_createName" type="string"
                           placeholder="Le nom de votre produit" class="validate">
                    <label for="icon_createName"></label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <select class="" required ng-model="category" material-select watch>
                        <option value="" disabled selected>Choisir la catégorie</option>
                        <option value="impression">Impression</option>
                        <option value="furniture">Fourniture</option>
                        <option value="ITProvision">Informatique</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">euro_symbol</i>
                    <input ng-model="price" required id="icon_createPrice" type="number"
                           placeholder="Saisissez le prix unitaire de votre produit" class="validate">
                    <label for="icon_createPrice"></label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">block</i>
                    <input ng-model="onSale" id="icon_createOnSale" type="checkbox" checked="{{onSale}}"
                           class="validate">
                    <label for="icon_createOnSale">L'article est-il disponible à la vente</label>
                </div>
            </div>
            <div class="row">
                <div class="file-field input-field">
                    <div class="btn">
                        <span>Image</span>
                        <input type="file" ngf-select="addFile($file, $invalidFile, $event)">
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text" required>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button ng-click="newProductForm.$valid && createProduct()"
                    class="modal-action modal-close waves-effect waves-green btn-flat"
                    ng-class="{disabled:newProductForm.$invalid==true}" type="submit">Valider
            </button>
        </div>
    </form>
</div>


<div id="updateProductModal" class="modal">
    <form name="editProductForm" novalidate>
        <div class="modal-content">
            <h4>Edition</h4>
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">euro_symbol</i>
                    <input ng-model="price" id="icon_editPrice" required type="number" class="validate">
                    <label for="icon_editPrice"></label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">block</i>
                    <input ng-model="onSale" id="icon_EditOnSale" type="checkbox" checked="{{onSale}}" class="validate">
                    <label for="icon_EditOnSale"></label>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button ng-click="editProductForm.$valid && saveProduct()"
                    class="modal-action modal-close waves-effect waves-green btn"
                    ng-class="{disabled:editProductForm.$invalid==true}" type="submit">Valider
            </button>
        </div>
    </form>
</div>

</div>
